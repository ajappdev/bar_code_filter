{% load i18n %}
{% load humanize %}

<div class="card">
<div class="card-header">
    <h5>{{produits_traites}} produits ont été traités</h5>
    <p class="text-muted"><span class="badge bg bg-danger"><span class="mdi mdi-close"></span></span> {{failed_products}} produits ont échoué</p>
    <p class="text-muted"><span class="badge bg bg-success"><span class="mdi mdi-check"></span></span> {{success_products}} produits ont été enregistrés</p>
</div>
<div class="card-body">
    <div class="table-responsive text-nowrap">
    <table class="table">
        <thead class="bg-light">
        <tr>
            <th>{% trans "Code barres" %}</th>
            <th>{% trans "Nom produit" %}</th>
            <th>{% trans "Lien" %}</th>
            <th></th>
        </tr>
        </thead>
        <tbody>
            {% for index, row in treatment_result.iterrows %}
                {% if row.3 != '' %}
                <tr style="background:rgb(255 220 220)">
                    <td>
                        {{row.0}}
                    </td>
                    <td>
                        {{row.1}}
                    </td>
                    <td>
                        {{row.2}}
                    </td>
                    <td class="text-center">
                        <span title="{{row.3}}" class="error_details badge bg bg-danger"><span class="mdi mdi-close"></span> Erreur</span>
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td>
                        {{row.0}}
                    </td>
                    <td>
                        {{row.1}}
                    </td>
                    <td>
                        {{row.2}}
                    </td>
                    <td class="text-center">
                        <span class="badge bg bg-success"><span class="mdi mdi-check"></span> Passé</span>
                    </td>
                </tr>
                {% endif %}
        {% endfor %}
        </tbody>
    </table>
    </div>
</div>
</div>
  
<script
src="https://code.jquery.com/jquery-3.6.1.js"
integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI="
crossorigin="anonymous"></script>


<script>
  

//////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////
/////////////////////////////AT LOAD//////////////////////
//////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////
////////////////////////CHANGE EVENTS//////////////////////
//////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////
////////////////////////CLICK EVENTS//////////////////////
//////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////


$(document).on("click", ".error_details", function() {
    Swal.fire({
        icon: 'error',
        text: translate_js($(this).attr("title"), "EN"),
        position: 'center',
        showConfirmButton: false,
    })
});


</script>


<style>

.error_details
{
    cursor: pointer;
}

</style>